% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/feature_engineering.R
\name{calculate_tail_calibration_features}
\alias{calculate_tail_calibration_features}
\title{Calculate Tail Calibration Features for Win Probability Model}
\usage{
calculate_tail_calibration_features(
  runs_needed,
  balls_remaining,
  wickets_in_hand
)
}
\arguments{
\item{runs_needed}{Integer. Runs still required to win}

\item{balls_remaining}{Integer. Balls left in innings}

\item{wickets_in_hand}{Integer. Wickets remaining (10 - wickets_fallen)}
}
\value{
Data frame with columns:
\itemize{
\item chase_completed: Binary. 1 if runs_needed <= 0 (already won)
\item chase_impossible: Binary. 1 if balls/wickets exhausted with runs still needed
\item runs_per_ball_needed: runs_needed / balls_remaining (Inf capped at 6)
\item balls_per_run_available: balls_remaining / runs_needed (capped at 20)
\item resources_per_run: (balls + wickets*6) / runs_needed (capped at 30)
\item chase_buffer: balls_remaining - runs_needed (how many "spare" balls)
\item chase_buffer_ratio: chase_buffer / balls_remaining
\item is_easy_chase: Binary. < 1 run per ball needed with 5+ wickets
\item is_difficult_chase: Binary. > 2 runs per ball needed or < 3 wickets
\item theoretical_min_balls: runs_needed / 6 (if all sixes)
\item balls_surplus: balls_remaining - theoretical_min_balls
}
}
\description{
Calculates features that help the model produce well-calibrated predictions
at the extremes (near 0\% and 100\% win probability). These features capture
"game essentially decided" situations that the model might otherwise miss.
}
\keyword{internal}
